<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Products - ShopVerse</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #577399;
        --secondary: #bdd5ea;
        --light: #f8f9fa;
        --dark: #212529;
        --success: #28a745;
        --danger: #dc3545;
        --gray: #6c757d;
        --light-gray: #e9ecef;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --transition: all 0.3s ease;
      }

      .dark-mode {
        --primary: #4a6480;
        --secondary: #a8c5e0;
        --light: #121212;
        --dark: #f8f9fa;
        --gray: #a0a0a0;
        --light-gray: #2a2a2a;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: var(--light);
        color: var(--dark);
        transition: var(--transition);
        line-height: 1.6;
      }

      a {
        text-decoration: none;
        color: inherit;
      }

      button {
        cursor: pointer;
        border: none;
        outline: none;
        transition: var(--transition);
      }

      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header & Navbar */
      header {
        background-color: var(--primary);
        color: white;
        box-shadow: var(--shadow);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 0;
      }

      .logo {
        font-size: 1.8rem;
        font-weight: 700;
        display: flex;
        align-items: center;
      }

      .logo i {
        margin-right: 10px;
      }

      .nav-links {
        display: flex;
        list-style: none;
      }

      .nav-links li {
        margin: 0 15px;
      }

      .nav-links a {
        font-weight: 500;
        padding: 5px 0;
        position: relative;
      }

      .nav-links a:hover {
        color: var(--secondary);
      }

      .nav-links a::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background-color: var(--secondary);
        transition: var(--transition);
      }

      .nav-links a:hover::after {
        width: 100%;
      }

      .nav-icons {
        display: flex;
        align-items: center;
      }

      .nav-icons button {
        background: transparent;
        color: white;
        font-size: 1.2rem;
        margin-left: 15px;
        padding: 5px;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .nav-icons button:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .cart-icon {
        position: relative;
      }

      .cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: var(--danger);
        color: white;
        font-size: 0.7rem;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .mobile-menu {
        display: none;
        font-size: 1.5rem;
      }

      /* Page Header */
      .page-header {
        background-color: var(--secondary);
        padding: 60px 0;
        text-align: center;
      }

      .page-header h1 {
        font-size: 2.5rem;
        color: var(--primary);
        margin-bottom: 15px;
      }

      .page-header p {
        color: var(--dark);
        font-size: 1.1rem;
        max-width: 600px;
        margin: 0 auto;
      }

      /* Products Section */
      .products-section {
        padding: 60px 0;
      }

      .products-container {
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: 30px;
      }

      /* Filters */
      .filters-sidebar {
        background-color: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: var(--shadow);
        height: fit-content;
        position: sticky;
        top: 100px;
      }

      .dark-mode .filters-sidebar {
        background-color: var(--light-gray);
      }

      .filter-group {
        margin-bottom: 25px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--light-gray);
      }

      .filter-group:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .filter-title {
        font-size: 1.2rem;
        color: var(--primary);
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .clear-filters {
        background: none;
        color: var(--primary);
        font-size: 0.9rem;
        text-decoration: underline;
      }

      .price-range-container {
        padding: 0 5px;
      }

      .price-range {
        width: 100%;
        margin: 15px 0;
      }

      .price-inputs {
        display: flex;
        justify-content: space-between;
        margin-top: 10px;
      }

      .price-input {
        width: 45%;
        padding: 8px 12px;
        border: 1px solid var(--light-gray);
        border-radius: 5px;
        background-color: var(--light);
        color: var(--dark);
      }

      .dark-mode .price-input {
        background-color: #2a2a2a;
        border-color: #3a3a3a;
      }

      .categories-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .category-item {
        display: flex;
        align-items: center;
      }

      .category-checkbox {
        margin-right: 10px;
        width: 18px;
        height: 18px;
        accent-color: var(--primary);
      }

      .category-label {
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .category-count {
        background-color: var(--light-gray);
        color: var(--gray);
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.8rem;
      }

      .dark-mode .category-count {
        background-color: #3a3a3a;
      }

      .rating-stars {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .rating-item {
        display: flex;
        align-items: center;
      }

      .rating-checkbox {
        margin-right: 10px;
        width: 18px;
        height: 18px;
        accent-color: var(--primary);
      }

      .stars {
        color: #ffc107;
        margin-right: 10px;
      }

      /* Products Area */
      .products-area {
        display: flex;
        flex-direction: column;
      }

      .products-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        flex-wrap: wrap;
        gap: 15px;
      }

      .search-box {
        position: relative;
        flex-grow: 1;
        max-width: 400px;
      }

      .search-input {
        width: 100%;
        padding: 12px 45px 12px 15px;
        border: 1px solid var(--light-gray);
        border-radius: 30px;
        background-color: var(--light);
        color: var(--dark);
        transition: var(--transition);
      }

      .dark-mode .search-input {
        background-color: #2a2a2a;
        border-color: #3a3a3a;
      }

      .search-input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 2px rgba(87, 115, 153, 0.2);
      }

      .search-button {
        position: absolute;
        right: 5px;
        top: 50%;
        transform: translateY(-50%);
        background-color: var(--primary);
        color: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .sort-options {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .sort-select {
        padding: 10px 15px;
        border: 1px solid var(--light-gray);
        border-radius: 5px;
        background-color: var(--light);
        color: var(--dark);
        cursor: pointer;
      }

      .dark-mode .sort-select {
        background-color: #2a2a2a;
        border-color: #3a3a3a;
      }

      .view-options {
        display: flex;
        gap: 10px;
      }

      .view-btn {
        width: 40px;
        height: 40px;
        background-color: var(--light-gray);
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--dark);
      }

      .dark-mode .view-btn {
        background-color: #3a3a3a;
      }

      .view-btn.active {
        background-color: var(--primary);
        color: white;
      }

      .products-count {
        color: var(--gray);
        font-size: 0.9rem;
      }

      /* Products Grid */
      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 25px;
      }

      .products-list {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .product-card {
        background-color: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: var(--shadow);
        transition: var(--transition);
      }

      .dark-mode .product-card {
        background-color: var(--light-gray);
      }

      .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
      }

      .product-card.list-view {
        display: flex;
        flex-direction: row;
      }

      .product-card.list-view .product-img {
        width: 200px;
        height: 200px;
      }

      .product-card.list-view .product-info {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      .product-img {
        height: 200px;
        width: 100%;
        object-fit: cover;
      }

      .product-info {
        padding: 20px;
      }

      .product-category {
        font-size: 0.8rem;
        color: var(--gray);
        text-transform: uppercase;
        margin-bottom: 5px;
      }

      .product-title {
        font-size: 1.1rem;
        margin-bottom: 10px;
        color: var(--primary);
        display: -webkit-box;
        /* -webkit-line-clamp: 2; */
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .product-rating {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }

      .rating-stars-small {
        color: #ffc107;
        margin-right: 5px;
      }

      .rating-count {
        font-size: 0.9rem;
        color: var(--gray);
      }

      .product-price {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 10px;
      }

      .product-description {
        color: var(--gray);
        margin-bottom: 15px;
        font-size: 0.9rem;
        display: -webkit-box;
        /* -webkit-line-clamp: 3; */
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .product-actions {
        display: flex;
        justify-content: space-between;
      }

      .product-actions button {
        padding: 8px 15px;
        border-radius: 5px;
        font-weight: 600;
      }

      .add-to-cart {
        background-color: var(--primary);
        color: white;
        flex-grow: 1;
        margin-right: 10px;
      }

      .add-to-cart:hover {
        background-color: #4a6480;
      }

      .view-details {
        background-color: var(--light-gray);
        color: var(--dark);
      }

      .dark-mode .view-details {
        background-color: #3a3a3a;
      }

      .view-details:hover {
        background-color: var(--gray);
        color: white;
      }

      /* Pagination */
      .pagination {
        display: flex;
        justify-content: center;
        margin-top: 40px;
        gap: 10px;
      }

      .pagination button {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 5px;
        background-color: var(--light-gray);
        color: var(--dark);
      }

      .dark-mode .pagination button {
        background-color: #3a3a3a;
      }

      .pagination button.active {
        background-color: var(--primary);
        color: white;
      }

      .pagination button:hover:not(.active) {
        background-color: var(--gray);
        color: white;
      }

      /* Footer */
      footer {
        background-color: var(--primary);
        color: white;
        padding: 60px 0 20px;
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 40px;
        margin-bottom: 40px;
      }

      .footer-column h3 {
        font-size: 1.3rem;
        margin-bottom: 20px;
        color: var(--secondary);
      }

      .footer-links {
        list-style: none;
      }

      .footer-links li {
        margin-bottom: 10px;
      }

      .footer-links a:hover {
        color: var(--secondary);
      }

      .social-icons {
        display: flex;
        gap: 15px;
        margin-top: 20px;
      }

      .social-icons a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        transition: var(--transition);
      }

      .social-icons a:hover {
        background-color: var(--secondary);
        color: var(--primary);
      }

      .copyright {
        text-align: center;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        font-size: 0.9rem;
        color: var(--secondary);
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background-color: var(--light);
        border-radius: 10px;
        max-width: 600px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .dark-mode .modal-content {
        background-color: var(--light-gray);
      }

      .modal-header {
        padding: 20px;
        border-bottom: 1px solid var(--light-gray);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-title {
        font-size: 1.5rem;
        color: var(--primary);
      }

      .close-modal {
        background: none;
        font-size: 1.5rem;
        color: var(--gray);
      }

      .modal-body {
        padding: 20px;
      }

      .modal-product {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .modal-product-img {
        width: 100%;
        border-radius: 10px;
      }

      /* Toast */
      .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--success);
        color: white;
        padding: 15px 25px;
        border-radius: 5px;
        box-shadow: var(--shadow);
        display: flex;
        align-items: center;
        z-index: 3000;
        transform: translateY(100px);
        opacity: 0;
        transition: var(--transition);
      }

      .toast.active {
        transform: translateY(0);
        opacity: 1;
      }

      .toast i {
        margin-right: 10px;
        font-size: 1.2rem;
      }

      /* Responsive Design */
      @media (max-width: 992px) {
        .products-container {
          grid-template-columns: 1fr;
        }

        .filters-sidebar {
          position: static;
        }
      }

      @media (max-width: 768px) {
        .nav-links {
          display: none;
        }

        .mobile-menu {
          display: block;
        }

        .products-controls {
          flex-direction: column;
          align-items: stretch;
        }

        .search-box {
          max-width: 100%;
        }

        .sort-options {
          justify-content: space-between;
        }

        .product-card.list-view {
          flex-direction: column;
        }

        .product-card.list-view .product-img {
          width: 100%;
        }
      }

      @media (max-width: 576px) {
        .products-grid {
          grid-template-columns: 1fr;
        }

        .modal-product {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header & Navbar -->
    <header>
      <div class="container">
        <nav class="navbar">
          <a href="index.html" class="logo">
            <i class="fas fa-shopping-bag"></i>
            ShopVerse
          </a>

          <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="products.html" class="active">Products</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>

          <div class="nav-icons">
            <button id="theme-toggle" title="Toggle Dark Mode">
              <i class="fas fa-moon"></i>
            </button>
            <button id="account-btn" title="My Account">
              <i class="fas fa-user"></i>
            </button>
            <a href="cart.html" class="cart-icon" title="Shopping Cart">
              <i class="fas fa-shopping-cart"></i>
              <span class="cart-count">0</span>
            </a>
            <button class="mobile-menu">
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </nav>
      </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
      <div class="container">
        <h1>Our Products</h1>
        <p>
          Discover our wide range of high-quality products at unbeatable prices
        </p>
      </div>
    </section>

    <!-- Products Section -->
    <section class="products-section">
      <div class="container">
        <div class="products-container">
          <!-- Filters Sidebar -->
          <aside class="filters-sidebar">
            <div class="filter-group">
              <div class="filter-title">
                <h3>Filters</h3>
                <button class="clear-filters">Clear All</button>
              </div>
            </div>

            <div class="filter-group">
              <h3 class="filter-title">Price Range</h3>
              <div class="price-range-container">
                <input
                  type="range"
                  min="0"
                  max="1000"
                  value="1000"
                  class="price-range"
                  id="price-range"
                />
                <div class="price-inputs">
                  <input
                    type="number"
                    class="price-input"
                    id="min-price"
                    placeholder="Min"
                    value="0"
                  />
                  <input
                    type="number"
                    class="price-input"
                    id="max-price"
                    placeholder="Max"
                    value="1000"
                  />
                </div>
              </div>
            </div>

            <div class="filter-group">
              <h3 class="filter-title">Categories</h3>
              <div class="categories-list" id="categories-list">
                <!-- Categories will be loaded here -->
              </div>
            </div>

            <div class="filter-group">
              <h3 class="filter-title">Customer Ratings</h3>
              <div class="rating-stars">
                <div class="rating-item">
                  <input
                    type="checkbox"
                    class="rating-checkbox"
                    id="rating-5"
                    value="5"
                  />
                  <label for="rating-5" class="category-label">
                    <span class="stars">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </span>
                    <span>& Up</span>
                  </label>
                </div>
                <div class="rating-item">
                  <input
                    type="checkbox"
                    class="rating-checkbox"
                    id="rating-4"
                    value="4"
                  />
                  <label for="rating-4" class="category-label">
                    <span class="stars">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="far fa-star"></i>
                    </span>
                    <span>& Up</span>
                  </label>
                </div>
                <div class="rating-item">
                  <input
                    type="checkbox"
                    class="rating-checkbox"
                    id="rating-3"
                    value="3"
                  />
                  <label for="rating-3" class="category-label">
                    <span class="stars">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="far fa-star"></i>
                      <i class="far fa-star"></i>
                    </span>
                    <span>& Up</span>
                  </label>
                </div>
              </div>
            </div>

            <div class="filter-group">
              <h3 class="filter-title">Availability</h3>
              <div class="categories-list">
                <div class="category-item">
                  <input
                    type="checkbox"
                    class="category-checkbox"
                    id="in-stock"
                  />
                  <label for="in-stock" class="category-label">
                    <span>In Stock</span>
                  </label>
                </div>
                <div class="category-item">
                  <input
                    type="checkbox"
                    class="category-checkbox"
                    id="on-sale"
                  />
                  <label for="on-sale" class="category-label">
                    <span>On Sale</span>
                  </label>
                </div>
              </div>
            </div>
          </aside>

          <!-- Products Area -->
          <div class="products-area">
            <div class="products-controls">
              <div class="search-box">
                <input
                  type="text"
                  class="search-input"
                  id="search-input"
                  placeholder="Search products..."
                />
                <button class="search-button">
                  <i class="fas fa-search"></i>
                </button>
              </div>

              <div class="sort-options">
                <span>Sort by:</span>
                <select class="sort-select" id="sort-select">
                  <option value="default">Default</option>
                  <option value="price-low">Price: Low to High</option>
                  <option value="price-high">Price: High to Low</option>
                  <option value="name">Name</option>
                  <option value="rating">Rating</option>
                </select>

                <div class="view-options">
                  <button
                    class="view-btn active"
                    id="grid-view"
                    title="Grid View"
                  >
                    <i class="fas fa-th"></i>
                  </button>
                  <button class="view-btn" id="list-view" title="List View">
                    <i class="fas fa-list"></i>
                  </button>
                </div>
              </div>

              <div class="products-count">
                Showing <span id="showing-count">0</span> of
                <span id="total-count">0</span> products
              </div>
            </div>

            <div class="products-grid" id="products-container">
              <!-- Products will be loaded here -->
            </div>

            <div class="pagination" id="pagination">
              <!-- Pagination will be generated here -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-content">
          <div class="footer-column">
            <h3>ShopVerse</h3>
            <p>
              Your ultimate shopping destination for quality products at
              affordable prices. We're committed to providing excellent customer
              service and a seamless shopping experience.
            </p>
            <div class="social-icons">
              <a href="#"><i class="fab fa-facebook-f"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-pinterest"></i></a>
            </div>
          </div>

          <div class="footer-column">
            <h3>Quick Links</h3>
            <ul class="footer-links">
              <li><a href="index.html">Home</a></li>
              <li><a href="products.html">Products</a></li>
              <li><a href="about.html">About Us</a></li>
              <li><a href="contact.html">Contact</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms & Conditions</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h3>Customer Service</h3>
            <ul class="footer-links">
              <li><a href="#">FAQ</a></li>
              <li><a href="#">Shipping & Returns</a></li>
              <li><a href="#">Order Tracking</a></li>
              <li><a href="#">Payment Methods</a></li>
              <li><a href="#">Size Guide</a></li>
              <li><a href="#">Product Care</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h3>Contact Info</h3>
            <ul class="footer-links">
              <li>
                <i class="fas fa-map-marker-alt"></i> 123 Commerce St, City,
                State 12345
              </li>
              <li><i class="fas fa-phone"></i> +1 (555) 123-4567</li>
              <li><i class="fas fa-envelope"></i> support@shopverse.com</li>
              <li><i class="fas fa-clock"></i> Mon-Fri: 9AM-6PM</li>
            </ul>
          </div>
        </div>

        <div class="copyright">
          <p>&copy; 2025 ShopVerse. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <!-- Product Detail Modal -->
    <div class="modal" id="product-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Product Details</h3>
          <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
          <!-- Product details will be loaded here -->
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <i class="fas fa-check-circle"></i>
      <span id="toast-message">Product added to cart!</span>
    </div>

    <script>
      // Global variables
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      let products = [];
      let filteredProducts = [];
      let currentPage = 1;
      const productsPerPage = 12;
      let currentView = "grid";

      // DOM Elements
      const themeToggle = document.getElementById("theme-toggle");
      const cartCount = document.querySelector(".cart-count");
      const productsContainer = document.getElementById("products-container");
      const categoriesList = document.getElementById("categories-list");
      const priceRange = document.getElementById("price-range");
      const minPriceInput = document.getElementById("min-price");
      const maxPriceInput = document.getElementById("max-price");
      const searchInput = document.getElementById("search-input");
      const sortSelect = document.getElementById("sort-select");
      const gridViewBtn = document.getElementById("grid-view");
      const listViewBtn = document.getElementById("list-view");
      const showingCount = document.getElementById("showing-count");
      const totalCount = document.getElementById("total-count");
      const pagination = document.getElementById("pagination");
      const productModal = document.getElementById("product-modal");
      const modalBody = document.getElementById("modal-body");
      const closeModal = document.querySelector(".close-modal");
      const toast = document.getElementById("toast");
      const toastMessage = document.getElementById("toast-message");
      const clearFiltersBtn = document.querySelector(".clear-filters");

      // Initialize the page
      document.addEventListener("DOMContentLoaded", function () {
        updateCartCount();
        loadProducts();
        setupEventListeners();

        // Check for saved theme
        if (localStorage.getItem("darkMode") === "enabled") {
          document.body.classList.add("dark-mode");
          themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
      });

      // Set up event listeners
      function setupEventListeners() {
        themeToggle.addEventListener("click", toggleTheme);
        priceRange.addEventListener("input", updatePriceInputs);
        minPriceInput.addEventListener("change", updatePriceRange);
        maxPriceInput.addEventListener("change", updatePriceRange);
        searchInput.addEventListener("input", filterProducts);
        sortSelect.addEventListener("change", sortProducts);
        gridViewBtn.addEventListener("click", () => changeView("grid"));
        listViewBtn.addEventListener("click", () => changeView("list"));
        closeModal.addEventListener("click", () => {
          productModal.classList.remove("active");
        });
        clearFiltersBtn.addEventListener("click", clearFilters);

        // Close modal when clicking outside
        productModal.addEventListener("click", (e) => {
          if (e.target === productModal) {
            productModal.classList.remove("active");
          }
        });

        // Add event listeners to category checkboxes
        document
          .querySelectorAll(".category-checkbox, .rating-checkbox")
          .forEach((checkbox) => {
            checkbox.addEventListener("change", filterProducts);
          });
      }

      // Toggle dark/light mode
      function toggleTheme() {
        document.body.classList.toggle("dark-mode");

        if (document.body.classList.contains("dark-mode")) {
          localStorage.setItem("darkMode", "enabled");
          themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
          localStorage.setItem("darkMode", null);
          themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }
      }

      // Update cart count in navbar
      function updateCartCount() {
        const totalItems = cart.reduce(
          (total, item) => total + item.quantity,
          0
        );
        cartCount.textContent = totalItems;
      }

      // Show toast notification
      function showToast(message) {
        toastMessage.textContent = message;
        toast.classList.add("active");

        setTimeout(() => {
          toast.classList.remove("active");
        }, 3000);
      }

      // Load products from API (mock data for demo)
      function loadProducts() {
        // Mock product data (in a real app, this would come from an API like Fake Store API)
        products = [
          {
            id: 1,
            title: "Wireless Bluetooth Headphones",
            price: 79.99,
            image:
              "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
            description:
              "High-quality wireless headphones with noise cancellation and 30-hour battery life.",
            category: "electronics",
            rating: 4.5,
            reviewCount: 128,
            inStock: true,
            onSale: false,
          },
          {
            id: 2,
            title: "Smart Fitness Watch",
            price: 199.99,
            image:
              "https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1099&q=80",
            description:
              "Track your fitness goals with this advanced smartwatch featuring heart rate monitoring and GPS.",
            category: "electronics",
            rating: 4.2,
            reviewCount: 89,
            inStock: true,
            onSale: true,
          },
          {
            id: 3,
            title: "Organic Cotton T-Shirt",
            price: 24.99,
            image:
              "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1160&q=80",
            description:
              "Comfortable and sustainable t-shirt made from 100% organic cotton.",
            category: "clothing",
            rating: 4.7,
            reviewCount: 203,
            inStock: true,
            onSale: false,
          },
          {
            id: 4,
            title: "Stainless Steel Water Bottle",
            price: 29.99,
            image:
              "https://images.unsplash.com/photo-1602143407151-7111542de6e8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80",
            description:
              "Keep your drinks hot or cold for hours with this durable insulated water bottle.",
            category: "home",
            rating: 4.4,
            reviewCount: 156,
            inStock: true,
            onSale: true,
          },
          {
            id: 5,
            title: "Professional Camera",
            price: 899.99,
            image:
              "https://images.unsplash.com/photo-1502920917128-1aa500764cbd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
            description:
              "Capture stunning photos with this professional-grade camera with 4K video capability.",
            category: "electronics",
            rating: 4.8,
            reviewCount: 67,
            inStock: true,
            onSale: false,
          },
          {
            id: 6,
            title: "Leather Wallet",
            price: 49.99,
            image:
              "https://images.unsplash.com/photo-1627123424574-724758594e93?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80",
            description:
              "Genuine leather wallet with multiple card slots and cash compartment.",
            category: "accessories",
            rating: 4.3,
            reviewCount: 94,
            inStock: true,
            onSale: true,
          },
          {
            id: 7,
            title: "Yoga Mat",
            price: 34.99,
            image:
              "https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1220&q=80",
            description:
              "Non-slip yoga mat perfect for all types of yoga and exercise routines.",
            category: "sports",
            rating: 4.6,
            reviewCount: 132,
            inStock: true,
            onSale: false,
          },
          {
            id: 8,
            title: "Ceramic Coffee Mug Set",
            price: 39.99,
            image:
              "https://images.unsplash.com/photo-1514228742587-6b1558fcf93a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80",
            description:
              "Set of 4 beautifully designed ceramic mugs perfect for your morning coffee.",
            category: "home",
            rating: 4.5,
            reviewCount: 78,
            inStock: true,
            onSale: true,
          },
          {
            id: 9,
            title: "Running Shoes",
            price: 89.99,
            image:
              "https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
            description:
              "Lightweight running shoes with excellent cushioning and support.",
            category: "sports",
            rating: 4.4,
            reviewCount: 211,
            inStock: true,
            onSale: false,
          },
          {
            id: 10,
            title: "Wireless Charging Pad",
            price: 24.99,
            image:
              "https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1169&q=80",
            description:
              "Fast wireless charging pad compatible with all Qi-enabled devices.",
            category: "electronics",
            rating: 4.1,
            reviewCount: 56,
            inStock: true,
            onSale: true,
          },
          {
            id: 11,
            title: "Stainless Steel Cookware Set",
            price: 299.99,
            image:
              "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
            description:
              "10-piece stainless steel cookware set for your kitchen.",
            category: "home",
            rating: 4.7,
            reviewCount: 45,
            inStock: true,
            onSale: false,
          },
          {
            id: 12,
            title: "Designer Sunglasses",
            price: 129.99,
            image:
              "https://images.unsplash.com/photo-1572635196237-14b3f281503f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1160&q=80",
            description:
              "UV protection sunglasses with polarized lenses and stylish design.",
            category: "accessories",
            rating: 4.5,
            reviewCount: 89,
            inStock: true,
            onSale: true,
          },
        ];

        // Initialize filtered products
        filteredProducts = [...products];

        // Load categories
        loadCategories();

        // Display products
        displayProducts();
      }

      // Load categories from products
      function loadCategories() {
        const categories = {};

        products.forEach((product) => {
          if (categories[product.category]) {
            categories[product.category]++;
          } else {
            categories[product.category] = 1;
          }
        });

        // Generate category list HTML
        let categoriesHTML = "";
        for (const category in categories) {
          const categoryName =
            category.charAt(0).toUpperCase() + category.slice(1);
          categoriesHTML += `
                    <div class="category-item">
                        <input type="checkbox" class="category-checkbox" id="category-${category}" value="${category}">
                        <label for="category-${category}" class="category-label">
                            <span>${categoryName}</span>
                            <span class="category-count">${categories[category]}</span>
                        </label>
                    </div>
                `;
        }

        categoriesList.innerHTML = categoriesHTML;

        // Add event listeners to new checkboxes
        document.querySelectorAll(".category-checkbox").forEach((checkbox) => {
          checkbox.addEventListener("change", filterProducts);
        });
      }

      // Display products based on current filters and view
      function displayProducts() {
        // Calculate pagination
        const startIndex = (currentPage - 1) * productsPerPage;
        const endIndex = startIndex + productsPerPage;
        const productsToShow = filteredProducts.slice(startIndex, endIndex);

        // Update product count
        showingCount.textContent = productsToShow.length;
        totalCount.textContent = filteredProducts.length;

        // Generate product cards
        let productsHTML = "";

        productsToShow.forEach((product) => {
          const ratingStars = generateStarRating(product.rating);

          productsHTML += `
                    <div class="product-card ${
                      currentView === "list" ? "list-view" : ""
                    }">
                        <img src="${product.image}" alt="${
            product.title
          }" class="product-img">
                        <div class="product-info">
                            <div class="product-category">${
                              product.category
                            }</div>
                            <h3 class="product-title">${product.title}</h3>
                            <div class="product-rating">
                                <span class="rating-stars-small">${ratingStars}</span>
                                <span class="rating-count">(${
                                  product.reviewCount
                                })</span>
                            </div>
                            <p class="product-price">$${product.price} ${
            product.onSale
              ? '<span style="color: var(--danger); text-decoration: line-through; font-size: 0.9rem;">$' +
                (product.price * 1.2).toFixed(2) +
                "</span>"
              : ""
          }</p>
                            <p class="product-description">${
                              product.description
                            }</p>
                            <div class="product-actions">
                                <button class="add-to-cart" onclick="addToCart(${JSON.stringify(
                                  product
                                ).replace(/"/g, "&quot;")})">
                                    Add to Cart
                                </button>
                                <button class="view-details" onclick="viewProductDetails(${JSON.stringify(
                                  product
                                ).replace(/"/g, "&quot;")})">
                                    Details
                                </button>
                            </div>
                        </div>
                    </div>
                `;
        });

        productsContainer.innerHTML = productsHTML;

        // Generate pagination
        generatePagination();
      }

      // Generate star rating HTML
      function generateStarRating(rating) {
        let starsHTML = "";
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 !== 0;

        for (let i = 0; i < fullStars; i++) {
          starsHTML += '<i class="fas fa-star"></i>';
        }

        if (hasHalfStar) {
          starsHTML += '<i class="fas fa-star-half-alt"></i>';
        }

        const emptyStars = 5 - Math.ceil(rating);
        for (let i = 0; i < emptyStars; i++) {
          starsHTML += '<i class="far fa-star"></i>';
        }

        return starsHTML;
      }

      // Generate pagination buttons
      function generatePagination() {
        const totalPages = Math.ceil(filteredProducts.length / productsPerPage);

        if (totalPages <= 1) {
          pagination.innerHTML = "";
          return;
        }

        let paginationHTML = "";

        // Previous button
        if (currentPage > 1) {
          paginationHTML += `<button onclick="changePage(${
            currentPage - 1
          })"><i class="fas fa-chevron-left"></i></button>`;
        }

        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
          if (i === currentPage) {
            paginationHTML += `<button class="active">${i}</button>`;
          } else {
            paginationHTML += `<button onclick="changePage(${i})">${i}</button>`;
          }
        }

        // Next button
        if (currentPage < totalPages) {
          paginationHTML += `<button onclick="changePage(${
            currentPage + 1
          })"><i class="fas fa-chevron-right"></i></button>`;
        }

        pagination.innerHTML = paginationHTML;
      }

      // Change page
      function changePage(page) {
        currentPage = page;
        displayProducts();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      // Change view (grid/list)
      function changeView(view) {
        currentView = view;

        if (view === "grid") {
          gridViewBtn.classList.add("active");
          listViewBtn.classList.remove("active");
          productsContainer.classList.remove("products-list");
          productsContainer.classList.add("products-grid");
        } else {
          gridViewBtn.classList.remove("active");
          listViewBtn.classList.add("active");
          productsContainer.classList.remove("products-grid");
          productsContainer.classList.add("products-list");
        }

        displayProducts();
      }

      // Filter products based on selected criteria
      function filterProducts() {
        const searchTerm = searchInput.value.toLowerCase();
        const minPrice = parseFloat(minPriceInput.value) || 0;
        const maxPrice = parseFloat(maxPriceInput.value) || 1000;

        // Get selected categories
        const selectedCategories = [];
        document
          .querySelectorAll(".category-checkbox:checked")
          .forEach((checkbox) => {
            selectedCategories.push(checkbox.value);
          });

        // Get selected ratings
        const selectedRatings = [];
        document
          .querySelectorAll(".rating-checkbox:checked")
          .forEach((checkbox) => {
            selectedRatings.push(parseInt(checkbox.value));
          });

        // Get availability filters
        const inStockOnly = document.getElementById("in-stock").checked;
        const onSaleOnly = document.getElementById("on-sale").checked;

        // Apply filters
        filteredProducts = products.filter((product) => {
          // Search term filter
          if (
            searchTerm &&
            !product.title.toLowerCase().includes(searchTerm) &&
            !product.description.toLowerCase().includes(searchTerm)
          ) {
            return false;
          }

          // Price filter
          if (product.price < minPrice || product.price > maxPrice) {
            return false;
          }

          // Category filter
          if (
            selectedCategories.length > 0 &&
            !selectedCategories.includes(product.category)
          ) {
            return false;
          }

          // Rating filter
          if (selectedRatings.length > 0) {
            const meetsRating = selectedRatings.some(
              (rating) => product.rating >= rating
            );
            if (!meetsRating) return false;
          }

          // Availability filters
          if (inStockOnly && !product.inStock) {
            return false;
          }

          if (onSaleOnly && !product.onSale) {
            return false;
          }

          return true;
        });

        // Reset to first page
        currentPage = 1;

        // Apply sorting
        sortProducts();

        // Update display
        displayProducts();
      }

      // Sort products
      function sortProducts() {
        const sortValue = sortSelect.value;

        switch (sortValue) {
          case "price-low":
            filteredProducts.sort((a, b) => a.price - b.price);
            break;
          case "price-high":
            filteredProducts.sort((a, b) => b.price - a.price);
            break;
          case "name":
            filteredProducts.sort((a, b) => a.title.localeCompare(b.title));
            break;
          case "rating":
            filteredProducts.sort((a, b) => b.rating - a.rating);
            break;
          default:
            // Default sorting (by ID or keep original order)
            break;
        }

        displayProducts();
      }

      // Update price inputs when range slider changes
      function updatePriceInputs() {
        minPriceInput.value = 0;
        maxPriceInput.value = priceRange.value;
        filterProducts();
      }

      // Update range slider when price inputs change
      function updatePriceRange() {
        const min = parseFloat(minPriceInput.value) || 0;
        const max = parseFloat(maxPriceInput.value) || 1000;

        if (min >= 0 && max <= 1000 && min <= max) {
          priceRange.value = max;
          filterProducts();
        }
      }

      // Clear all filters
      function clearFilters() {
        // Reset search
        searchInput.value = "";

        // Reset price range
        priceRange.value = 1000;
        minPriceInput.value = 0;
        maxPriceInput.value = 1000;

        // Uncheck all category and rating checkboxes
        document
          .querySelectorAll(".category-checkbox, .rating-checkbox")
          .forEach((checkbox) => {
            checkbox.checked = false;
          });

        // Reset sort
        sortSelect.value = "default";

        // Apply changes
        filterProducts();
      }

      // Add product to cart
      function addToCart(product) {
        // Check if product is already in cart
        const existingItem = cart.find((item) => item.id === product.id);

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({
            id: product.id,
            title: product.title,
            price: product.price,
            image: product.image,
            quantity: 1,
          });
        }

        // Update localStorage
        localStorage.setItem("cart", JSON.stringify(cart));

        // Update UI
        updateCartCount();
        showToast("Product added to cart!");
      }

      // View product details in modal
      function viewProductDetails(product) {
        const ratingStars = generateStarRating(product.rating);

        modalBody.innerHTML = `
                <div class="modal-product">
                    <img src="${product.image}" alt="${
          product.title
        }" class="modal-product-img">
                    <div>
                        <h3>${product.title}</h3>
                        <p class="product-category">${product.category}</p>
                        <div class="product-rating">
                            <span class="rating-stars-small">${ratingStars}</span>
                            <span class="rating-count">${product.rating} (${
          product.reviewCount
        } reviews)</span>
                        </div>
                        <p class="product-price">$${product.price} ${
          product.onSale
            ? '<span style="color: var(--danger); text-decoration: line-through; font-size: 1rem;">$' +
              (product.price * 1.2).toFixed(2) +
              "</span>"
            : ""
        }</p>
                        <p>${product.description}</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                        <button class="btn add-to-cart" style="margin-top: 20px; width: 100%;" onclick="addToCart(${JSON.stringify(
                          product
                        ).replace(
                          /"/g,
                          "&quot;"
                        )}); productModal.classList.remove('active');">
                            Add to Cart
                        </button>
                    </div>
                </div>
            `;

        productModal.classList.add("active");
      }
    </script>
  </body>
</html>
